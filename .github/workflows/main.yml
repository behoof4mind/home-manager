name: PR creation event notification
on:
  pull_request:
    types: [opened, reopened]
jobs:
  one:
    runs-on: ubuntu-latest
    steps:
      - name: Dump GitHub context
        env:
          GITHUB_CONTEXT: ${{ toJSON(github) }}
        run: echo "$GITHUB_CONTEXT"
  notify:
    name: PR notification
    runs-on: [ubuntu-latest]
    steps:
      - name: Send custom JSON data to Slack workflow
        id: slack
        uses: slackapi/slack-github-action@v1.26.0
        with:
          payload-file-path: ".github/workflows/payload-slack-content.json"
          payload-file-path-parsed: true
          # For posting a rich message using Block Kit
          # payload: |
          #   {
          #     "text": "GitHub Action build result: ${{ job.status }}\n${{ github.event.pull_request.html_url || github.event.head_commit.url }}",
          #     "blocks": [
          #       {
          #         "type": "section",
          #         "text": {
          #           "type": "mrkdwn",
          #           "text": "GitHub Action build result: ${{ job.status }}\n${{ github.event.pull_request.html_url || github.event.head_commit.url }}"
          #         }
          #       }
          #     ]
          #   }
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL_PULL_REQUESTS_PIE }}
          SLACK_WEBHOOK_TYPE: INCOMING_WEBHOOK
